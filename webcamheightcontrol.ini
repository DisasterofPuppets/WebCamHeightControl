#include <Servo.h>

// Define servo pins
const int servo1Pin = 9; // Connect servo 1 to pin 9
const int servo2Pin = 10; // Connect servo 2 to pin 10

// Create servo objects
Servo servo1;
Servo servo2;

// Define button pins
const int button1Pin = 2; // Button 1
const int button2Pin = 3; // Button 2
const int button3Pin = 4; // Button 3
const int button4Pin = 5; // Button 4

void setup() {
  // Attach servos to pins
  servo1.attach(servo1Pin);
  servo2.attach(servo2Pin);

  // Set initial servo positions 
  servo1.write(90); // Center position
  servo2.write(90); // Center position

  // Initialize button pins
  pinMode(button1Pin, INPUT_PULLUP);
  pinMode(button2Pin, INPUT_PULLUP);
  pinMode(button3Pin, INPUT_PULLUP);
  pinMode(button4Pin, INPUT_PULLUP);
}

void loop() {
  // Check button states
  if (digitalRead(button1Pin) == LOW) {
    // Button 1 held: Rotate servo 1 clockwise, servo 2 anticlockwise
    servo1.write(120); // Adjust angle for greater speed 
    servo2.write(60); // Adjust angle for greater speed 
  } else if (digitalRead(button2Pin) == LOW) {
    // Button 2 held: Rotate servo 1 anticlockwise, servo 2 clockwise
    servo1.write(60); 
    servo2.write(120);
  } else if (digitalRead(button3Pin) == LOW) {
    // Button 3 pressed: Rotate both servos for 3 seconds
    rotateServos(120, 60); 
    delay(3000); // Wait for 3 seconds, adjust as required
  } else if (digitalRead(button4Pin) == LOW) {
    // Button 4 pressed: Rotate both servos for 3 seconds (opposite direction)
    rotateServos(60, 120);
    delay(3000); // Wait for 3 seconds adjust as needed.
  } else {
    // No button pressed: Stop servos
    servo1.write(90); // Center position
    servo2.write(90); // Center position
  }
}

// Helper function to smoothly rotate both servos
void rotateServos(int angle1, int angle2) {
  for (int pos = servo1.read(); pos != angle1; pos += (angle1 > pos ? 1 : -1)) {
    servo1.write(pos);
    servo2.write(angle2 + (pos - servo1.read())); // Keep the sum constant
    delay(15); // Adjust delay for smoother motion
  }
}
